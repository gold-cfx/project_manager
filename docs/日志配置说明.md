# 科研项目管理系统 - 日志配置说明

## 📋 日志系统概述

科研项目管理系统采用统一的日志管理方案，支持灵活的配置选项，便于系统监控和问题排查。

## 🏗️ 日志目录结构

```
C:\research_project\log\
├── project_management.log          # 主日志文件
├── project_management_error.log    # 错误日志文件
├── project_management.log.2024-12-01  # 历史日志（自动轮转）
└── project_management_error.log.2024-12-01  # 历史错误日志
```

## ⚙️ 配置选项

### 系统设置中配置

在系统设置界面中，可以通过以下选项配置日志：

1. **日志目录**
   - 默认值: `C:\research_project\log`
   - 支持自定义任意有效路径
   - 程序自动创建目录

2. **日志级别**
   - DEBUG (10): 调试信息，最详细
   - INFO (20): 一般信息，默认级别
   - WARNING (30): 警告信息
   - ERROR (40): 错误信息
   - CRITICAL (50): 严重错误

3. **日志保留天数**
   - 范围: 1-365天
   - 默认值: 7天
   - 自动清理过期日志

### 配置文件手动修改

配置文件路径: `C:\research_project\config\config.json`

```json
{
  "log_config": {
    "log_dir": "C:\\research_project\\log",
    "log_level": "INFO",
    "max_days": 7
  }
}
```

## 🔄 日志轮转机制

系统采用按天轮转的方式管理日志文件：

- **轮转时间**: 每日午夜自动轮转
- **保留策略**: 根据配置保留指定天数的历史日志
- **自动清理**: 启动时自动清理过期日志文件
- **编码格式**: UTF-8，支持中文日志

## 📊 日志格式

每条日志记录包含以下信息：

```
2024-12-01 14:30:25,123 - ProjectManagement - INFO - main:45 - 系统启动成功
│         │          │        │        │      │      └─ 日志消息
│         │          │        │        │      └─────── 代码行号
│         │          │        │        └──────────── 函数名
│         │          │        └─────────────────── 日志级别
│         │          └──────────────────────────── 日志记录器名称
│         └─────────────────────────────────────── 时间戳
└───────────────────────────────────────────────── 毫秒
```

## 🛠️ 常见问题

### 权限问题
如果自定义日志目录无权限写入，系统会自动回退到程序目录下的 `logs` 文件夹。

### 磁盘空间
建议定期检查和清理日志文件，或设置较短的保留天数。

### 调试模式
开发调试时可将日志级别设置为 DEBUG，获取更详细的运行信息。

## 📞 技术支持

- **日志查看**: 使用任何文本编辑器查看日志文件
- **问题定位**: 重点查看 `project_management_error.log` 中的错误信息
- **配置修改**: 通过系统设置界面实时修改，重启生效

---

**更新时间**: 2024年12月
**适用版本**: v1.0+