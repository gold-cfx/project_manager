# 定时提醒功能使用指南

## 功能概述

科研项目管理系统现已支持定时提醒功能，系统会按照管理员设置的时间间隔自动扫描未读提醒，并在到达提醒时间时弹出提醒窗口。

## 功能特点

- **自动扫描**：系统启动时立即检查一次，之后按设定间隔自动扫描
- **灵活配置**：管理员可在系统设置中配置扫描间隔（1-24小时）
- **即时生效**：提醒配置修改后立即生效，无需重启应用
- **智能提醒**：只显示已到提醒时间的未读提醒

## 配置方法

### 管理员设置扫描间隔

1. 以管理员身份登录系统
2. 点击顶部菜单栏的"系统设置"
3. 在"系统配置"标签页中找到"提醒配置"区域
4. 使用数字选择器设置"提醒检查间隔"（范围：1-24小时）
5. 点击"保存配置"按钮

### 配置示例

- **1小时**：每小时检查一次提醒，适合需要及时提醒的场景
- **2小时**：每两小时检查一次，平衡及时性和系统资源消耗
- **12小时**：每天检查两次，适合非紧急提醒
- **24小时**：每天检查一次，适合长期项目管理

## 使用流程

### 创建提醒

1. 在项目管理界面选择需要提醒的项目
2. 点击"提醒"按钮或进入项目详情设置提醒
3. 设置提醒时间和提醒内容
4. 保存提醒设置

### 接收提醒

1. 系统会在设定时间自动弹出提醒窗口
2. 提醒窗口显示提醒标题和详细内容
3. 用户可以选择：
    - **标记为已读**：将提醒标记为已处理，不再显示
    - **稍后提醒**：将提醒推迟30分钟后再显示

## 技术实现

### 配置文件

定时提醒配置保存在 `config/reminder_config.json` 文件中：

```json
{
  "reminder_interval_hours": 1
}
```

### 工作原理

1. **启动检查**：应用程序启动时立即执行一次提醒检查
2. **定时扫描**：使用Qt的QTimer实现精确的定时任务
3. **数据查询**：查询数据库中所有未读且已到提醒时间的提醒
4. **用户交互**：通过对话框与用户交互，处理提醒状态

## 注意事项

1. **权限要求**：只有管理员可以修改提醒检查间隔
2. **即时生效**：修改配置后立即生效，无需重启应用
3. **系统资源**：建议不要将间隔设置过短（如1分钟），避免频繁扫描
4. **多用户环境**：定时任务是系统级配置，对所有用户生效

## 故障排除

### 提醒不显示

- 检查是否有未读提醒且提醒时间已到
- 确认系统设置中的提醒检查间隔是否正确
- 查看控制台输出是否有错误信息

### 配置不生效

- 确认是否以管理员身份修改配置
- 检查配置文件 `config/reminder_config.json` 是否存在且格式正确
- 重启应用程序后再次尝试

## 更新日志

- **2025-01-09**：新增定时提醒功能
- **2025-01-09**：支持管理员配置提醒检查间隔
- **2025-01-09**：优化提醒交互体验