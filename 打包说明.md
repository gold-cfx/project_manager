# 科研项目管理系统 打包说明

## 打包前准备

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 确保图标文件存在
确保以下文件存在：
- `icon/icon.ico` - 程序图标
- `config_file/config.json` - 主配置文件
- `config_file/reminder_config.json` - 提醒配置文件
- `help/` - 帮助文档目录

## 打包步骤

### 方法1：使用一键打包脚本（推荐）
```bash
python build_exe.py
```

### 方法2：使用PyInstaller命令
```bash
pyinstaller --clean --noconfirm --onedir --windowed --name="科研项目管理系统" --icon=icon/icon.ico --add-data=config_file;config_file --add-data=help;help --add-data=icon;icon --hidden-import=PyQt5.QtCore --hidden-import=PyQt5.QtGui --hidden-import=PyQt5.QtWidgets --hidden-import=PyQt5.QtSql --hidden-import=sqlalchemy.dialects.sqlite --collect-all=PyQt5 main.py
```

## 打包后文件结构

打包完成后，文件结构如下：
```
dist/
└── 科研项目管理系统/
    ├── 科研项目管理系统.exe    # 主程序
    ├── 运行系统.bat         # Windows运行脚本
    ├── config_file/              # 配置文件目录
    │   ├── config.json
    │   └── reminder_config.json
    ├── help/                # 帮助文档目录
    ├── icon/                # 图标目录
    │   └── icon.ico
    └── ...                  # 其他依赖文件
```

## 运行程序

### Windows系统
1. 进入 `dist/科研项目管理系统/` 目录
2. 双击 `运行系统.bat` 或直接双击 `科研项目管理系统.exe`

### 注意事项
1. 确保所有配置文件和数据库文件在正确的相对路径下
2. 程序会自动处理相对路径，无需手动设置
3. 首次运行时会自动创建必要的目录结构

## 常见问题

### 1. 打包失败
- 确保所有依赖已安装：`pip install -r requirements.txt`
- 检查PyInstaller版本：建议使用5.0以上版本

### 2. 运行时报错
- 检查配置文件是否完整
- 确保数据库文件权限正确
- 查看错误日志获取详细信息

### 3. 图标不显示
- 确认icon.ico文件存在且格式正确
- 检查文件路径是否正确

## 发布建议

1. **测试环境**：在干净的环境中测试打包后的程序
2. **包含文件**：确保所有必要的配置文件和文档都包含在发布包中
3. **用户指南**：提供简单的使用说明
4. **版本信息**：在程序中包含版本号和更新日志